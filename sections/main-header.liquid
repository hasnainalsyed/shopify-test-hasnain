{{ 'main-header.css' | asset_url | stylesheet_tag }}

{% liquid
  assign logo_width = section.settings.logo_width | default: 100

  if section.index <= 1
    assign loading = 'eager'
  else
    assign loading = 'lazy'
  endif
%}

<header class="header">
  <div class="header__inner">
    <div class="header__menu">
      <ul class="header__menu-list">
        {% for link in section.settings.menu.links %}
          <li class="header__menu-item">
            <a href="{{ link.url }}" class="header__menu-link">
              {{ link.title }}
            </a>
          </li>
        {% endfor %}
      </ul>
    </div>

    <div class="header__logo">
      {% if section.settings.logo %}
        <a href="{{ routes.root_url }}" class="header__logo-link">
          {{
            section.settings.logo
            | image_url: width: logo_width
            | image_tag: loading: loading, width: logo_width, class: 'header__logo-image'
          }}
        </a>
      {% else %}
        <a href="{{ routes.root_url }}" class="header__logo-link">
          {{ shop.name }}
        </a>
      {% endif %}
    </div>

    <div class="header__icons">
      <ul class="header__icons-list">
        {% if shop.customer_accounts_enabled %}
          <li class="header__icon-item">
            <a href="{{ routes.account_url }}" class="header__icon-link">
              {{ 'general.account' | t }}
            </a>
          </li>
        {% endif %}

        <li class="header__icon-item">
          <a href="{{ routes.cart_url }}" class="header__icon-link">
            {% if cart.item_count > 0 %}
              <sup>{{ cart.item_count }}</sup>
            {% endif %}

            {{ 'general.cart' | t }}
          </a>
        </li>
      </ul>
    </div>
  </div>
</header>

{% schema %}
{
  "name": "t:general.header",
  "settings": [
    {
      "type": "link_list",
      "id": "menu",
      "label": "t:labels.menu"
    },
    {
      "type": "header",
      "content": "t:labels.logo"
    },
    {
      "type": "image_picker",
      "id": "logo",
      "label": "t:labels.logo"
    },
    {
      "type": "range",
      "id": "logo_width",
      "label": "t:labels.logo_width",
      "min": 100,
      "max": 1000,
      "step": 100,
      "default": 100
    }
  ]
}
{% endschema %}
